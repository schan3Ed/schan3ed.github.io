'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports['default'] = c;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _classnames = require('classnames');

var _classnames2 = _interopRequireDefault(_classnames);

var _invariant = require('invariant');

var _invariant2 = _interopRequireDefault(_invariant);

function c(prefix) {
  return function decorator(component) {
    (0, _invariant2['default'])(!component.prototype.cRoot, '@c must be applied to a class with no `cRoot` property');
    (0, _invariant2['default'])(!component.prototype.c, '@c must be applied to a class with no `c` property');

    var componentName = component.prototype.displayName || component.name;

    component.prototype.cRoot = function cRoot(classNames) {
      for (var _len = arguments.length, overrideClassNames = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        overrideClassNames[_key - 1] = arguments[_key];
      }

      return ['' + prefix + '-' + componentName, this.c(classNames), this.props.className || '', this.c(overrideClassNames)].join(' ');
    };

    component.prototype.c = function c() {
      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      return _classnames2['default'].apply(undefined, args).split(/\s+/).filter(function (name) {
        return name !== '';
      }).map(function (name) {
        return '' + prefix + '-' + componentName + '-' + name;
      }).join(' ');
    };
  };
}

module.exports = exports['default'];